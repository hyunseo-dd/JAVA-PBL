import java.time.LocalDate;
import java.time.LocalDateTime;
import java.util.UUID;

public class TodoItem {
    private UUID id;
    private String name;
    private int priority;
    private LocalDate dueDate;
    private boolean isCompleted;
    private LocalDateTime createdAt;

    public TodoItem(String name, int priority, LocalDate dueDate) {
        this.id = UUID.randomUUID();
        this.name = name;
        this.priority = priority;
        this.dueDate = dueDate;
        this.isCompleted = false;
        this.createdAt = LocalDateTime.now();
    }
    public void markAsCompleted() {
        this.isCompleted = true;
        System.out.printf("'%s' (ID: %s) ì™„ë£Œ ì„±ê³µ!\n", this.name, this.id.toString().substring(0, 4));
    }
    public void updateItem(String newName, Integer newPriority, LocalDate newDueDate) {
        if (newName != null) {
            this.name = newName;
        }
        if (newPriority != null) {
            this.priority = newPriority;
        }
        if (newDueDate != null) {
            this.dueDate = newDueDate;
        }
        System.out.printf("'%s' (ID: %s) í•  ì¼ì´ ì—…ë°ì´íŠ¸ ë˜ì—ˆìŠµë‹ˆë‹¤!\n", this.name, this.id.toString().substring(0, 4));
    }
    @Override
    public String toString() {
        String status = isCompleted? "âœ…" : "ğŸ”²";
        String dueDateStr = (dueDate != null)? "~" + dueDate.toString() : "ê¸°í•œ ì—†ìŒ";
        return String.format("%s [%d] %s (%s)", status, priority, name, dueDateStr);
    }
    public UUID getId() {return id;}
    public String getName() {return name;}
    public int getPriority() {return priority;}
    public LocalDate getDueDate() {return dueDate;}
    public boolean isCompleted() {return isCompleted;}
    public LocalDateTime getCreatedAt() {return createdAt;}
    public void setName(String name) {this.name = name;}
    public void setPriority(int priority) {this.priority = priority;}
    public void setDueDate(LocalDate dueDate) {this.dueDate = dueDate;}
    public void setCompleted(boolean completed) {isCompleted = completed;}
}

import java.time.LocalDate;
public class Task extends TodoItem {
    public Task(String name, int priority, LocalDate dueDate) {
        super(name, priority, dueDate);
    }
}

import java.time.LocalDate;
import java.time.LocalDateTime;
public class Routine extends TodoItem {
    private String interval;
    private LocalDateTime lastCompleted;
    public Routine(String name, String interval, int priority, LocalDate dueDate) {
        super(name, priority, dueDate);
        this.interval = interval;
        this.lastCompleted = null;
    }
    @Override
    public void markAsCompleted() {
        super.markAsCompleted();
        this.lastCompleted = LocalDateTime.now();
        System.out.printf("ë‹¤ìŒ í• ì¼ì€ '%s' ì£¼ê¸°ì— ë”°ë¼ ìƒì„±ë  ì˜ˆì •ì…ë‹ˆë‹¤.\n", this.interval);
    }
    @Override
    public String toString() {
        String baseStr = super.toString();
        return String.format("%s [ë°˜ë³µ: %s]", baseStr, interval);
    }
    public String getInterval() {return interval;}
    public LocalDateTime  getLastCompleted() {return lastCompleted;}
    
}

import java.time.LocalDate;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;
import java.util.UUID;
import java.util.stream.Collectors;

public class TodoManager {
    private List<TodoItem> todoList;

    public TodoManager() {
        this.todoList = new ArrayList<>();
    }
    public void addItem(TodoItem item) {
        this.todoList.add(item);
        System.out.printf("'%s' í•  ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. (ID: %s)\n", item.getName(), item.getId().toString().substring(0, 4));
    }
    public TodoItem findItemById(UUID itemId) {
        for (TodoItem item : todoList) {
            if (item.getId().equals(itemId)) {
                return item;
            }
        }
        System.out.printf("ID '%s' ì— í•´ë‹¹í•˜ëŠ” í•  ì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n", itemId.toString().substring(0, 4));
        return null;
    }
    public boolean deleteItem(UUID itemId) {
        TodoItem itemToDelete = findItemById(itemId);
        if (itemToDelete != null) {
            this.todoList.remove(itemToDelete);
            System.out.printf("'%s' í•  ì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\n", itemToDelete.getName());
            return true;
        }
        return false;
    }
    public List<TodoItem> getAllItems(boolean includeCompleted) {
        if (includeCompleted) {
            return new ArrayList<>(this.todoList);
        }
        return this.todoList.stream()
        .filter(item -> !item.isCompleted())
        .collect(Collectors.toList());
    }
    public void sortItems(String sortKey) {
        sortItems(sortKey, false);
    }
    public void sortItems(String sortKey, boolean reverse) {
        Comparator<TodoItem> comparator = null;
        if ("priority".equals(sortKey)) {
            comparator = Comparator
            .comparing(TodoItem::isCompleted)
            .thenComparingInt(TodoItem::getPriority);
            System.out.println("í•  ì¼ ëª©ë¡ì´ ìš°ì„ ìˆœìœ„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } else if ("dueDate".equals(sortKey)) {
            comparator = Comparator
            .comparing(TodoItem::isCompleted)
            .thenComparing(item -> item.getDueDate() == null ? LocalDate.MAX:item.getDueDate());
            System.out.println("í•  ì¼ ëª©ë¡ì´ ë§ˆê° ê¸°í•œ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } else {
            System.out.printf("ê²½ê³ : ì•Œ ìˆ˜ ì—†ëŠ” ì •ë ¬ ê¸°ì¤€ '%s' ì…ë‹ˆë‹¤.\n", sortKey);
            return;
        }
        if (reverse) {
            todoList.sort(comparator.reversed());
        } else {
            todoList.sort(comparator);
        }
    }
    public List<TodoItem> searchItems(String keyword) {
        List<TodoItem> results = this.todoList.stream().filter(item -> item.getName().toLowerCase().contains(keyword.toLowerCase()))
        .collect(Collectors.toList());
        System.out.printf("'%s' ê²€ìƒ‰ ê²°ê³¼:\n", keyword);
        if (results.isEmpty()) {
            System.out.println("ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.");
        }
        return results;
    }
}

import java.time.LocalDate;
import java.util.List;
import java.util.UUID;

public class TodoApp {
    public static void main(String[] args) {
        LocalDate today = LocalDate.now();
        LocalDate tomorrow = today.plusDays(1);
        LocalDate nextWeek = today.plusWeeks(1);
        
        TodoManager manager = new TodoManager();
        System.out.println("\n--- 1. í•  ì¼ ì¶”ê°€ ---");
        Task task1 = new Task("í”„ë¡œì íŠ¸ ì œì•ˆì„œ ì‘ì„±", 1, tomorrow);
        Task task2 = new Task("íŒ€ì›ë“¤ê³¼ ì£¼ê°„ íšŒì˜", 2, today);
        Task task3 = new Task("ê¸°ìˆ  ë™í–¥ ë¦¬ì„œì¹˜", 4, nextWeek);
        Routine routine1 = new Routine("ë§¤ì¼ ì½”ë”© í•œ ì‹œê°„", " daily", 1, null);
        Task task4 = new Task("Figma ë””ìì¸ ìµœì¢… ê²€í† ", 1, tomorrow);
        manager.addItem(task1);
        manager.addItem(task2);
        manager.addItem(task3);
        manager.addItem(routine1);
        manager.addItem(task4);
        System.out.println("\n--- 2. í˜„ì¬ í•  ì¼ ëª©ë¡ (ì •ë ¬ ì „) ---");
        for (TodoItem item : manager.getAllItems(false)) {
            System.out.println(item);
        }
        System.out.println("\n---3. ìš°ì„  ìˆœìœ„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ ---");
        manager.sortItems("priority");
        for (TodoItem item : manager.getAllItems(false)) {
            System.out.println(item);
        }
        System.out.println("\n---4. íŠ¹ì • í•  ì¼ ì™„ë£Œ ì²˜ë¦¬ ---");
        TodoItem targetTask1 = manager.findItemById(task1.getId());
        if (targetTask1 != null) {
            targetTask1.markAsCompleted();
        }
        TodoItem targetRoutine1 = manager.findItemById(routine1.getId());
        if (targetRoutine1 != null) {
            targetRoutine1.markAsCompleted();
        }
        System.out.println("\n---5. ì™„ë£Œ í›„ í•  ì¼ ëª©ë¡ (ì™„ë£Œëœ í•­ëª© ì œì™¸) ---");
        for (TodoItem item : manager.getAllItems(false)) {
            System.out.println(item);
        }
        System.out.println("\n---6. ë§ˆê° ê¸°í•œ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ì™„ë£Œëœ í•­ëª© ì œì™¸) ---");
        for (TodoItem item : manager.getAllItems(false)) {
            System.out.println(item);
        }
        System.out.println("\n---7. í•  ì¼ ìˆ˜ì • ---");
        for (TodoItem item : manager.getAllItems(false)) {
            System.out.println(item);
        }
        System.out.println("\n---8. ìˆ˜ì • í›„ ëª©ë¡ í™•ì¸ ---");
        for (TodoItem item : manager.getAllItems(false)) {
            System.out.println(item);
        }
        System.out.println("\n---9. í•  ì¼ ê²€ìƒ‰ ---");
        for (TodoItem item : manager.getAllItems(false)) {
            System.out.println(item);
        }
        System.out.println("\n---10. í• ì¼ ì‚­ì œ ---");
        for (TodoItem item : manager.getAllItems(false)) {
            System.out.println(item);
        }
        System.out.println("\n---11. ì‚­ì œ í›„ ìµœì¢… í•  ì¼ ëª©ë¡ ---");
        for (TodoItem item : manager.getAllItems(false)) {
            System.out.println(item);
        }
    }
}
